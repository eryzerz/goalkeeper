!function(e){function t(t){for(var r,c,i=t[0],s=t[1],l=t[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={4:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([49,1,0]),n()}({49:function(e,t,n){"use strict";n.r(t);n(7),n(8),n(9),n(5);var r=n(0),a=n.n(r),o=n(1);function c(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var i=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("caches"in window)){e.next=23;break}return e.next=3,caches.match("https://api.football-data.org/v2/teams/".concat(t));case 3:if(!(n=e.sent)){e.next=11;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.next=14,a.a.get("https://api.football-data.org/v2/teams/".concat(t),o.a);case 14:return c=e.sent,e.abrupt("return",c.data);case 18:return e.prev=18,e.t0=e.catch(11),e.abrupt("return",null);case 21:e.next=24;break;case 23:console.log("Caches is not supported in this browser");case 24:case"end":return e.stop()}}),e,null,[[11,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,s,"next",e)}function s(e){c(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),s=n(4);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){p(o,r,a,c,i,"next",e)}function i(e){p(o,r,a,c,i,"throw",e)}c(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){var t="function"==typeof Map?new Map:void 0;return(y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,S(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,e)})(e)}function b(e,t,n){return(b=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&w(a,n.prototype),a}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x={content:""},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(p,e);var t,n,r,a,o,c,l,d=(t=p,n=g(),function(){var e,r=S(t);if(n){var a=S(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return m(this,e)});function p(){return v(this,p),d.apply(this,arguments)}return r=p,(a=[{key:"connectedCallback",value:(l=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading(),e.next=3,this.loadTeamData();case 3:this._data=e.sent,this._data?this.render():this.innerHTML='\n                <div class="container" style="height: 100vh; display: flex; justify-content: center; align-items: center;">\n                    <h5 style="text-align: center; font-family: var(--font-tertiary);">Oops.. cannot get team data. Please try again in a minute</h5>\n                </div>\n                ';case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"loading",value:function(){this.innerHTML='\n        <div class="container" style="height: 100vh; display: flex; justify-content: center; align-items: center;">\n            <div class="progress"><div class="indeterminate"></div></div>\n        </div>\n        '}},{key:"loadPlayer",value:function(e){var t=new Date(e.dateOfBirth).toLocaleDateString();return'\n        <li class="player">\n            <div class="collapsible-header player-header">'.concat(e.name,'</div>\n            <div class="collapsible-body player-body">\n                <div class="desc">\n                    <h6>Position</h6>\n                    <p>').concat(e.position,'</p>\n                </div>\n                <div class="desc">\n                    <h6>Nationality</h6>\n                    <p>').concat(e.nationality,'</p>\n                </div>\n                <div class="desc">\n                    <h6>Date of Birth</h6>\n                    <p>').concat(t,"</p>\n                </div>\n            </div>\n        </li>\n        ")}},{key:"loadCoach",value:function(e){var t=new Date(e.dateOfBirth).toLocaleDateString();return'\n        <div class="coach">\n            <div class="coach-name">\n                <p>'.concat(e.name,'</p>\n            </div>\n            <div class="desc">\n                <h6>Nationality</h6>\n                <p>').concat(e.nationality,'</p>\n            </div>\n            <div class="desc">\n                <h6>Date of birth</h6>\n                <p>').concat(t,"</p>\n            </div>\n        </div>\n        ")}},{key:"loadTeamData",value:(c=f(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,s,l,u,d,p,f,v,h,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),n=t.get("id"),e.prev=2,e.next=5,i(n);case 5:if(!(r=e.sent)){e.next=12;break}return a=r.name,o=r.shortName,c=r.founded,s=r.venue,l=r.clubColors,u=r.address,d=r.website,p=r.email,f=r.crestUrl,v=r.squad,h={name:a,shortName:o,founded:c,venue:s,clubColors:l,address:u,website:d,email:p,crestUrl:f},m=v.filter((function(e){return"PLAYER"===e.role})),y=v.filter((function(e){return"COACH"===e.role}))?v.filter((function(e){return"COACH"===e.role}))[0]:null,e.abrupt("return",[h,m,y]);case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(){return c.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=u(this._data,3),n=t[0],r=t[1],a=t[2],o=JSON.parse(localStorage.getItem("is-from-keeper"));this.innerHTML='\n        <div class="container wrapper">\n            <h5>'.concat(n.name,'</h5>\n            <div class="team-container">\n                <div class="desc-container">\n                    <div class="desc">\n                        <h6>Short name</h6>\n                        <p>').concat(n.shortName,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>Founded</h6>\n                        <p>').concat(n.founded,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>Venue</h6>\n                        <p>').concat(n.venue,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>Club colors</h6>\n                        <p>').concat(n.clubColors,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>Address</h6>\n                        <p>').concat(n.address,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>Website</h6>\n                        <p>').concat(n.website,'</p>\n                    </div>\n                    <div class="desc">\n                        <h6>E-mail</h6>\n                        <p>').concat(n.email,'</p>\n                    </div>\n                </div>\n                <img class="team-crest" src="').concat(n.crestUrl,'" alt="">\n            </div>\n        \n            <div class="squad-container">\n                <h5>Players</h5>\n                <ul class="collapsible popout">\n                ').concat(r.reduce((function(t,n){return t+e.loadPlayer(n)}),""),'\n                </ul>\n            </div>\n        \n            <div class="coach-container">\n                <h5>Coach</h5>\n                ').concat(a?this.loadCoach(a):'<h5 style="text-align: center; font-family: var(--font-tertiary);">Currently, we have no data about the coach</h5>',"\n            </div>\n\n            ").concat(o?'<div class="fixed-action-btn">\n                <a class="btn-floating btn-large grey darken-4" style="box-shadow: -2px 2px 9px var(--text-primary);" id="delete-save">\n                <i class="fad fa-trash"></i>\n                </a>\n            </div>\n            <div class="tap-target" data-target="delete-save">\n                <div class="tap-target-content">\n                <h5>Delete</h5>\n                <p>Remove your favourite team from Keeper</p>\n                </div>\n            </div>\n                ':'<div class="fixed-action-btn">\n                <a class="btn-floating btn-large grey darken-4" style="box-shadow: -2px 2px 9px var(--text-primary);" id="save">\n                <i class="fad fa-save"></i>\n                </a>\n            </div>\n            <div class="tap-target" data-target="save">\n                <div class="tap-target-content">\n                <h5>Your Keeper</h5>\n                <p>Save your favourite team with Keeper by clicking the button again after you dismissed this info</p>\n                </div>\n            </div>\n            ','\n            <div id="delete-modal" class="modal">\n                <div class="modal-content">\n                    <h4>Remove Saved Team</h4>\n                    <p>Are you sure you want to remove this team from Keeper?</p>\n                </div>\n                <div class="modal-footer">\n                    <button id="agree-btn" class="modal-close waves-effect waves-green btn-flat">Yep</button>\n                    <button id="cancel-btn" class="modal-close waves-effect waves-green btn-flat">Nope</button>\n                </div>\n            </div>\n        </div>\n        ');var c=document.querySelector(".tap-target");M.TapTarget.init(c);var l=M.TapTarget.getInstance(c);if(localStorage.getItem("isTargetOpen")||(l.open(),localStorage.setItem("isTargetOpen",!0)),o){var d=document.querySelector("#delete-save"),p=document.querySelector(".modal"),v=M.Modal.init(p),h=document.querySelector("#agree-btn");document.querySelector("#cancel-btn"),d.addEventListener("click",f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.open(),h.addEventListener("click",f(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),n=t.get("id"),e.next=4,Object(s.b)(n);case 4:M.toast({html:"Team successfully deleted!",classes:"save-toast"}),l.close(),v.destroy(),history.replaceState(x,null,"index.html#keeper"),window.location.reload();case 9:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))))}else document.querySelector("#save").addEventListener("click",f(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),n=t.get("id"),e.next=4,i(n);case 4:return r=e.sent,e.next=7,Object(s.f)(r);case 7:e.sent?M.toast({html:"You already save this poor team!",classes:"save-toast"}):M.toast({html:"".concat(r.name," successfully saved! Check your Keeper"),classes:"save-toast"}),l.close();case 10:case"end":return e.stop()}}),e)}))));var m=document.querySelectorAll(".collapsible");M.Collapsible.init(m);var y=document.querySelectorAll(".player"),b=document.querySelectorAll(".player-body");y[0].classList.toggle("active"),b[0].style.display="block"}}])&&h(r.prototype,a),o&&h(r,o),p}(y(HTMLElement));function O(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){O(o,r,a,c,i,"next",e)}function i(e){O(o,r,a,c,i,"throw",e)}c(void 0)}))}}customElements.define("team-desc-elem",k);var P={content:""},j=function(){var e=R(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/dist/src/pages/team.html",e.prev=1,e.next=4,a.a.get("/src/pages/team.html");case 4:200===(n=e.sent).status?(P.content=n.data,r=document.querySelector("#main-content"),history.pushState(P,null,"team-detail.html?id=".concat(t)),window.onpopstate=function(e){e.state&&(P=e.state,r.innerHTML=P.content)},r.innerHTML=P.content):console.error("Something went wrong on load content!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Something went wrong on load content! ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),n=new URLSearchParams(window.location.search),""!==(r=n.get("id"))&&null!==r||(r="1"),e.next=6,t(r);case 6:(o=document.querySelector(".sidenav-back"))&&o.addEventListener("click",(function(){if(window.location.pathname.match("team-detail.html")){var e=localStorage.getItem("code");JSON.parse(localStorage.getItem("is-from-keeper"))?history.replaceState(P,null,"index.html#keeper"):history.replaceState(P,null,"competition-detail.html?code=".concat(e)),window.location.reload()}}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",(function(){"serviceWorker"in navigator?navigator.serviceWorker.register("/service-worker.js").then((function(){console.log("Service Worker successfully registered"),j()})).catch((function(){console.log("Failed to register Service Worker")})):console.log("Service Worker isn't supported in this browser.")}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvc2VydmljZXMvdGVhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3RlYW0tZGVzYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy92aWV3L3RlYW0tZGV0YWlsLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiNCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiZ2V0VGVhbSIsInRlYW1faWQiLCJjYWNoZXMiLCJtYXRjaCIsInJlcyIsImpzb24iLCJheGlvcyIsImNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJzdGF0ZSIsImNvbnRlbnQiLCJUZWFtRGVzY0VsZW0iLCJ0aGlzIiwibG9hZGluZyIsImxvYWRUZWFtRGF0YSIsIl9kYXRhIiwicmVuZGVyIiwiaW5uZXJIVE1MIiwicGxheWVyIiwiZG9iIiwiRGF0ZSIsImRhdGVPZkJpcnRoIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicG9zaXRpb24iLCJuYXRpb25hbGl0eSIsImNvYWNoIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJpZCIsInRlYW0iLCJzaG9ydE5hbWUiLCJmb3VuZGVkIiwidmVudWUiLCJjbHViQ29sb3JzIiwiYWRkcmVzcyIsIndlYnNpdGUiLCJlbWFpbCIsImNyZXN0VXJsIiwic3F1YWQiLCJ0ZWFtSW5mbyIsInBsYXllcnMiLCJmaWx0ZXIiLCJwZXJzb24iLCJyb2xlIiwiaXRlbSIsImlzRnJvbVNhdmVkIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInJlZHVjZSIsImh0bWwiLCJsb2FkUGxheWVyIiwibG9hZENvYWNoIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiTSIsIlRhcFRhcmdldCIsImluaXQiLCJpbmZvIiwiZ2V0SW5zdGFuY2UiLCJvcGVuIiwic2V0SXRlbSIsImRlbCIsImVsZW1zIiwiaW5zdGFuY2VzIiwiTW9kYWwiLCJhZ3JlZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVUZWFtIiwidG9hc3QiLCJjbGFzc2VzIiwiY2xvc2UiLCJkZXN0cm95IiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsInJlbG9hZCIsInNhdmVUZWFtIiwicXVlcnlTZWxlY3RvckFsbCIsIkNvbGxhcHNpYmxlIiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInN0eWxlIiwiZGlzcGxheSIsIkhUTUxFbGVtZW50IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJsb2FkQ29udGVudCIsInN0YXR1cyIsIl9tYWluIiwicHVzaFN0YXRlIiwib25wb3BzdGF0ZSIsImUiLCJlcnJvciIsImJhY2siLCJwYXRobmFtZSIsImNvZGUiLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFXSCxFQUFLLEdBQ2hCSSxFQUFjSixFQUFLLEdBQ25CSyxFQUFpQkwsRUFBSyxHQUlITSxFQUFJLEVBQUdDLEVBQVcsR0FDcENELEVBQUlILEVBQVNLLE9BQVFGLElBQ3pCSixFQUFVQyxFQUFTRyxHQUNoQkcsT0FBT0MsVUFBVUMsZUFBZUMsS0FBS0MsRUFBaUJYLElBQVlXLEVBQWdCWCxJQUNwRkssRUFBU08sS0FBS0QsRUFBZ0JYLEdBQVMsSUFFeENXLEVBQWdCWCxHQUFXLEVBRTVCLElBQUlELEtBQVlHLEVBQ1pLLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtSLEVBQWFILEtBQ3BEYyxFQUFRZCxHQUFZRyxFQUFZSCxJQUtsQyxJQUZHZSxHQUFxQkEsRUFBb0JoQixHQUV0Q08sRUFBU0MsUUFDZEQsRUFBU1UsT0FBVFYsR0FPRCxPQUhBVyxFQUFnQkosS0FBS0ssTUFBTUQsRUFBaUJiLEdBQWtCLElBR3ZEZSxJQUVSLFNBQVNBLElBRVIsSUFEQSxJQUFJQyxFQUNJZixFQUFJLEVBQUdBLEVBQUlZLEVBQWdCVixPQUFRRixJQUFLLENBRy9DLElBRkEsSUFBSWdCLEVBQWlCSixFQUFnQlosR0FDakNpQixHQUFZLEVBQ1JDLEVBQUksRUFBR0EsRUFBSUYsRUFBZWQsT0FBUWdCLElBQUssQ0FDOUMsSUFBSUMsRUFBUUgsRUFBZUUsR0FDRyxJQUEzQlgsRUFBZ0JZLEtBQWNGLEdBQVksR0FFM0NBLElBQ0ZMLEVBQWdCUSxPQUFPcEIsSUFBSyxHQUM1QmUsRUFBU00sRUFBb0JBLEVBQW9CQyxFQUFJTixFQUFlLEtBSXRFLE9BQU9ELEVBSVIsSUFBSVEsRUFBbUIsR0FLbkJoQixFQUFr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dkYsUUFDRkEsRUFBUXVGLEVBQUV2RixNQUNWb0YsRUFBTTVFLFVBQVlSLEVBQU1DLFVBS2hDbUYsRUFBTTVFLFVBQVlSLEVBQU1DLFNBR3hCSCxRQUFRMEYsTUFBTSx5Q0F2Qk4sZ0RBMEJaMUYsUUFBUTBGLE1BQVIsdURBMUJZLHlEQUZYLHNEQWdDSHZFLEVBQVMsSUFBSUMsZ0JBQWdCL0IsT0FBT2dDLFNBQVNDLFFBR3hDLE1BRlBDLEVBQUtKLEVBQU8vQyxJQUFJLFFBRUksT0FBUG1ELElBQWFBLEVBQUssS0FuQzFCLFNBcUNINkQsRUFBWTdELEdBckNULFFBdUNIb0UsRUFBT3pDLFNBQVNDLGNBQWMsbUJBQzFCd0MsRUFBSzNCLGlCQUFpQixTQUFTLFdBQ3JDLEdBQUkzRSxPQUFPZ0MsU0FBU3VFLFNBQVNqRyxNQUFNLG9CQUFxQixDQUNwRCxJQUFNa0csRUFBT2xELGFBQWFDLFFBQVEsUUFDZEgsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxtQkFFaEQwQixRQUFRQyxhQUFhckUsRUFBTyxLQUE1QixxQkFFQW9FLFFBQVFDLGFBQWFyRSxFQUFPLEtBQTVCLHVDQUFrRTJGLElBR3RFeEcsT0FBT2dDLFNBQVNtRCxhQWxEZiwyQ0FBSCxxREF1RFZ0QixTQUFTYyxpQkFBaUIsb0JBQW9CLFdBQ3RDLGtCQUFtQjhCLFVBRWZBLFVBQVVDLGNBQ0xDLFNBQVMsc0JBQ1RDLE1BQUssV0FDRmpHLFFBQVFDLElBQUksMENBQ1p1QixPQUpSLE9BTVcsV0FDSHhCLFFBQVFDLElBQUksd0NBZXhCRCxRQUFRQyxJQUFJIiwiZmlsZSI6InRlYW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDQ6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzQ5LDEsMF0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnLmpzJ1xuXG5leHBvcnQgY29uc3QgZ2V0VGVhbSA9IGFzeW5jICh0ZWFtX2lkKSA9PiB7XG4gICAgaWYgKFwiY2FjaGVzXCIgaW4gd2luZG93KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNhY2hlcy5tYXRjaChgaHR0cHM6Ly9hcGkuZm9vdGJhbGwtZGF0YS5vcmcvdjIvdGVhbXMvJHt0ZWFtX2lkfWApXG4gICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpXG4gICAgICAgICAgICByZXR1cm4gZGF0YVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YyL3RlYW1zLyR7dGVhbV9pZH1gLCBjb25maWcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NhY2hlcyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gICAgfVxufSIsImltcG9ydCAnLi4vdmlldy9tYXRlcmlhbGl6ZS5taW4uanMnXG5pbXBvcnQgeyBnZXRUZWFtIH0gZnJvbSBcIi4uL3NlcnZpY2VzL3RlYW1cIlxuaW1wb3J0IHsgc2F2ZVRlYW0sIGRlbGV0ZVRlYW0gfSBmcm9tICcuLi9zZXJ2aWNlcy9kYXRhYmFzZS5qcydcblxubGV0IHN0YXRlID0ge1xuICAgIGNvbnRlbnQ6ICcnXG59XG5cbmNsYXNzIFRlYW1EZXNjRWxlbSBleHRlbmRzIEhUTUxFbGVtZW50IHtcblxuICAgIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLmxvYWRpbmcoKVxuXG4gICAgICAgIHRoaXMuX2RhdGEgPSBhd2FpdCB0aGlzLmxvYWRUZWFtRGF0YSgpXG4gICAgICAgIGlmICh0aGlzLl9kYXRhKSB0aGlzLnJlbmRlcigpXG4gICAgICAgIGVsc2UgdGhpcy5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiIHN0eWxlPVwiaGVpZ2h0OiAxMDB2aDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNSBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtdGVydGlhcnkpO1wiPk9vcHMuLiBjYW5ub3QgZ2V0IHRlYW0gZGF0YS4gUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIG1pbnV0ZTwvaDU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYFxuICAgIH1cblxuICAgIGxvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCIgc3R5bGU9XCJoZWlnaHQ6IDEwMHZoOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiPjxkaXYgY2xhc3M9XCJpbmRldGVybWluYXRlXCI+PC9kaXY+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgXG4gICAgfVxuXG4gICAgbG9hZFBsYXllcihwbGF5ZXIpIHtcblxuICAgICAgICBjb25zdCBkb2IgPSBuZXcgRGF0ZShwbGF5ZXIuZGF0ZU9mQmlydGgpLnRvTG9jYWxlRGF0ZVN0cmluZygpXG5cbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPGxpIGNsYXNzPVwicGxheWVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2libGUtaGVhZGVyIHBsYXllci1oZWFkZXJcIj4ke3BsYXllci5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxhcHNpYmxlLWJvZHkgcGxheWVyLWJvZHlcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxuICAgICAgICAgICAgICAgICAgICA8aDY+UG9zaXRpb248L2g2PlxuICAgICAgICAgICAgICAgICAgICA8cD4ke3BsYXllci5wb3NpdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg2Pk5hdGlvbmFsaXR5PC9oNj5cbiAgICAgICAgICAgICAgICAgICAgPHA+JHtwbGF5ZXIubmF0aW9uYWxpdHl9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNj5EYXRlIG9mIEJpcnRoPC9oNj5cbiAgICAgICAgICAgICAgICAgICAgPHA+JHtkb2J9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbGk+XG4gICAgICAgIGBcbiAgICB9XG5cbiAgICBsb2FkQ29hY2goY29hY2gpIHtcblxuICAgICAgICBjb25zdCBkb2IgPSBuZXcgRGF0ZShjb2FjaC5kYXRlT2ZCaXJ0aCkudG9Mb2NhbGVEYXRlU3RyaW5nKClcblxuICAgICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29hY2hcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2FjaC1uYW1lXCI+XG4gICAgICAgICAgICAgICAgPHA+JHtjb2FjaC5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NcIj5cbiAgICAgICAgICAgICAgICA8aDY+TmF0aW9uYWxpdHk8L2g2PlxuICAgICAgICAgICAgICAgIDxwPiR7Y29hY2gubmF0aW9uYWxpdHl9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxuICAgICAgICAgICAgICAgIDxoNj5EYXRlIG9mIGJpcnRoPC9oNj5cbiAgICAgICAgICAgICAgICA8cD4ke2RvYn08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGBcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkVGVhbURhdGEoKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgIGNvbnN0IGlkID0gcGFyYW1zLmdldCgnaWQnKVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGVhbSA9IGF3YWl0IGdldFRlYW0oaWQpXG5cbiAgICAgICAgICAgIGlmICh0ZWFtKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlbnVlLFxuICAgICAgICAgICAgICAgICAgICBjbHViQ29sb3JzLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICB3ZWJzaXRlLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgY3Jlc3RVcmwsXG4gICAgICAgICAgICAgICAgICAgIHNxdWFkIH0gPSB0ZWFtXG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZWFtSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2hvcnROYW1lLFxuICAgICAgICAgICAgICAgICAgICBmb3VuZGVkLFxuICAgICAgICAgICAgICAgICAgICB2ZW51ZSxcbiAgICAgICAgICAgICAgICAgICAgY2x1YkNvbG9ycyxcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgd2Vic2l0ZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIGNyZXN0VXJsXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVycyA9IHNxdWFkLmZpbHRlcihwZXJzb24gPT4gcGVyc29uLnJvbGUgPT09IFwiUExBWUVSXCIpXG4gICAgICAgICAgICAgICAgY29uc3QgY29hY2ggPSBzcXVhZC5maWx0ZXIocGVyc29uID0+IHBlcnNvbi5yb2xlID09PSBcIkNPQUNIXCIpID8gc3F1YWQuZmlsdGVyKHBlcnNvbiA9PiBwZXJzb24ucm9sZSA9PT0gXCJDT0FDSFwiKVswXSA6IG51bGxcblxuICAgICAgICAgICAgICAgIHJldHVybiBbdGVhbUluZm8sIHBsYXllcnMsIGNvYWNoXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlYW1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IFtpdGVtLCBwbGF5ZXIsIGNvYWNoXSA9IHRoaXMuX2RhdGFcblxuICAgICAgICBjb25zdCBpc0Zyb21TYXZlZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzLWZyb20ta2VlcGVyJykpXG4gICAgICAgIFxuXG4gICAgICAgIHRoaXMuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIHdyYXBwZXJcIj5cbiAgICAgICAgICAgIDxoNT4ke2l0ZW0ubmFtZX08L2g1PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlYW0tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2MtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDY+U2hvcnQgbmFtZTwvaDY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD4ke2l0ZW0uc2hvcnROYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDY+Rm91bmRlZDwvaDY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD4ke2l0ZW0uZm91bmRlZH08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg2PlZlbnVlPC9oNj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7aXRlbS52ZW51ZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg2PkNsdWIgY29sb3JzPC9oNj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7aXRlbS5jbHViQ29sb3JzfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDY+QWRkcmVzczwvaDY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD4ke2l0ZW0uYWRkcmVzc308L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg2PldlYnNpdGU8L2g2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtpdGVtLndlYnNpdGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNj5FLW1haWw8L2g2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtpdGVtLmVtYWlsfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInRlYW0tY3Jlc3RcIiBzcmM9XCIke2l0ZW0uY3Jlc3RVcmx9XCIgYWx0PVwiXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3F1YWQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGg1PlBsYXllcnM8L2g1PlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImNvbGxhcHNpYmxlIHBvcG91dFwiPlxuICAgICAgICAgICAgICAgICR7cGxheWVyLnJlZHVjZSgoaHRtbCwgcGxheWVyKSA9PiBodG1sICsgdGhpcy5sb2FkUGxheWVyKHBsYXllciksICcnKX1cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvYWNoLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxoNT5Db2FjaDwvaDU+XG4gICAgICAgICAgICAgICAgJHtjb2FjaCA/IHRoaXMubG9hZENvYWNoKGNvYWNoKSA6IGA8aDUgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXRlcnRpYXJ5KTtcIj5DdXJyZW50bHksIHdlIGhhdmUgbm8gZGF0YSBhYm91dCB0aGUgY29hY2g8L2g1PmB9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgJHtpc0Zyb21TYXZlZCA/XG4gICAgICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJmaXhlZC1hY3Rpb24tYnRuXCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJidG4tZmxvYXRpbmcgYnRuLWxhcmdlIGdyZXkgZGFya2VuLTRcIiBzdHlsZT1cImJveC1zaGFkb3c6IC0ycHggMnB4IDlweCB2YXIoLS10ZXh0LXByaW1hcnkpO1wiIGlkPVwiZGVsZXRlLXNhdmVcIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhZCBmYS10cmFzaFwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXAtdGFyZ2V0XCIgZGF0YS10YXJnZXQ9XCJkZWxldGUtc2F2ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXAtdGFyZ2V0LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8aDU+RGVsZXRlPC9oNT5cbiAgICAgICAgICAgICAgICA8cD5SZW1vdmUgeW91ciBmYXZvdXJpdGUgdGVhbSBmcm9tIEtlZXBlcjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJmaXhlZC1hY3Rpb24tYnRuXCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJidG4tZmxvYXRpbmcgYnRuLWxhcmdlIGdyZXkgZGFya2VuLTRcIiBzdHlsZT1cImJveC1zaGFkb3c6IC0ycHggMnB4IDlweCB2YXIoLS10ZXh0LXByaW1hcnkpO1wiIGlkPVwic2F2ZVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFkIGZhLXNhdmVcIj48L2k+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFwLXRhcmdldFwiIGRhdGEtdGFyZ2V0PVwic2F2ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXAtdGFyZ2V0LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8aDU+WW91ciBLZWVwZXI8L2g1PlxuICAgICAgICAgICAgICAgIDxwPlNhdmUgeW91ciBmYXZvdXJpdGUgdGVhbSB3aXRoIEtlZXBlciBieSBjbGlja2luZyB0aGUgYnV0dG9uIGFnYWluIGFmdGVyIHlvdSBkaXNtaXNzZWQgdGhpcyBpbmZvPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgfVxuICAgICAgICAgICAgPGRpdiBpZD1cImRlbGV0ZS1tb2RhbFwiIGNsYXNzPVwibW9kYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQ+UmVtb3ZlIFNhdmVkIFRlYW08L2g0PlxuICAgICAgICAgICAgICAgICAgICA8cD5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIHRoaXMgdGVhbSBmcm9tIEtlZXBlcj88L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiYWdyZWUtYnRuXCIgY2xhc3M9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtZ3JlZW4gYnRuLWZsYXRcIj5ZZXA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNhbmNlbC1idG5cIiBjbGFzcz1cIm1vZGFsLWNsb3NlIHdhdmVzLWVmZmVjdCB3YXZlcy1ncmVlbiBidG4tZmxhdFwiPk5vcGU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYFxuXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXAtdGFyZ2V0JylcbiAgICAgICAgTS5UYXBUYXJnZXQuaW5pdCh0YXJnZXQpO1xuICAgICAgICBjb25zdCBpbmZvID0gTS5UYXBUYXJnZXQuZ2V0SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXNUYXJnZXRPcGVuJykpIHtcbiAgICAgICAgICAgIGluZm8ub3BlbigpXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNUYXJnZXRPcGVuJywgdHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Zyb21TYXZlZCkge1xuICAgICAgICAgICAgY29uc3QgZGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbGV0ZS1zYXZlJylcbiAgICAgICAgICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZXMgPSBNLk1vZGFsLmluaXQoZWxlbXMpO1xuICAgICAgICAgICAgY29uc3QgYWdyZWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWdyZWUtYnRuJyk7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLWJ0bicpO1xuICAgICAgICAgICAgZGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlcy5vcGVuKClcbiAgICAgICAgICAgICAgICBhZ3JlZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJhbXMuZ2V0KCdpZCcpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVRlYW0oaWQpXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIE0udG9hc3QoeyBodG1sOiBgVGVhbSBzdWNjZXNzZnVsbHkgZGVsZXRlZCFgLCBjbGFzc2VzOiBcInNhdmUtdG9hc3RcIiB9KVxuICAgICAgICAgICAgICAgICAgICBpbmZvLmNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VzLmRlc3Ryb3koKVxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgbnVsbCwgYGluZGV4Lmh0bWwja2VlcGVyYClcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZScpXG4gICAgICAgICAgICBmYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcmFtcy5nZXQoJ2lkJylcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWFtID0gYXdhaXQgZ2V0VGVhbShpZClcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzYXZlVGVhbSh0ZWFtKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChyZXMpIE0udG9hc3QoeyBodG1sOiBcIllvdSBhbHJlYWR5IHNhdmUgdGhpcyBwb29yIHRlYW0hXCIsIGNsYXNzZXM6IFwic2F2ZS10b2FzdFwiIH0pXG4gICAgICAgICAgICAgICAgZWxzZSBNLnRvYXN0KHsgaHRtbDogYCR7dGVhbS5uYW1lfSBzdWNjZXNzZnVsbHkgc2F2ZWQhIENoZWNrIHlvdXIgS2VlcGVyYCwgY2xhc3NlczogXCJzYXZlLXRvYXN0XCIgfSlcbiAgICAgICAgICAgICAgICBpbmZvLmNsb3NlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuXG5cblxuICAgICAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsYXBzaWJsZScpO1xuICAgICAgICBNLkNvbGxhcHNpYmxlLmluaXQoZWxlbXMpO1xuXG4gICAgICAgIGNvbnN0IHBsYXllcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheWVyJylcbiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItYm9keScpXG5cbiAgICAgICAgcGxheWVyc1swXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKVxuICAgICAgICBib2R5WzBdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG5cbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndGVhbS1kZXNjLWVsZW0nLCBUZWFtRGVzY0VsZW0pIiwiaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lJ1xuaW1wb3J0ICcuLi8uLi9zdHlsZXMvYXBwLmNzcydcbmltcG9ydCAnLi4vY29tcG9uZW50cy9uYXYuanMnXG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvdGVhbS1kZXNjLmpzJ1xuaW1wb3J0ICcuLi92aWV3L21hdGVyaWFsaXplLm1pbi5qcydcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcydcblxubGV0IHN0YXRlID0ge1xuICAgIGNvbnRlbnQ6ICcnXG59XG5cbmNvbnN0IHRlYW0gPSBhc3luYyAoKSA9PiB7XG5cbiAgICBjb25zdCBsb2FkQ29udGVudCA9IGFzeW5jIChpZCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBgL3NyYy9wYWdlcy90ZWFtLmh0bWxgIDogYC9kaXN0L3NyYy9wYWdlcy90ZWFtLmh0bWxgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQoYC9zcmMvcGFnZXMvdGVhbS5odG1sYCk7XG5cbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5jb250ZW50ID0gcmVzLmRhdGFcbiAgICAgICAgICAgICAgICBjb25zdCBfbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1jb250ZW50XCIpXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIG51bGwsIGB0ZWFtLWRldGFpbC5odG1sP2lkPSR7aWR9YClcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gZS5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgX21haW4uaW5uZXJIVE1MID0gc3RhdGUuY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfbWFpbi5pbm5lckhUTUwgPSBzdGF0ZS5jb250ZW50XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlNvbWV0aGluZyB3ZW50IHdyb25nIG9uIGxvYWQgY29udGVudCFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU29tZXRoaW5nIHdlbnQgd3Jvbmcgb24gbG9hZCBjb250ZW50ISAke2Vycn1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgbGV0IGlkID0gcGFyYW1zLmdldCgnaWQnKVxuXG4gICAgaWYgKGlkID09PSBcIlwiIHx8IGlkID09PSBudWxsKSBpZCA9IFwiMVwiO1xuXG4gICAgYXdhaXQgbG9hZENvbnRlbnQoaWQpO1xuXG4gICAgY29uc3QgYmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlbmF2LWJhY2snKVxuICAgIGlmIChiYWNrKSBiYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKCd0ZWFtLWRldGFpbC5odG1sJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY29kZScpXG4gICAgICAgICAgICBjb25zdCBpc0Zyb21TYXZlZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzLWZyb20ta2VlcGVyJykpXG4gICAgICAgICAgICBpZiAoaXNGcm9tU2F2ZWQpIHtcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgbnVsbCwgYGluZGV4Lmh0bWwja2VlcGVyYClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsIG51bGwsIGBjb21wZXRpdGlvbi1kZXRhaWwuaHRtbD9jb2RlPSR7Y29kZX1gKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiAoKCkgPT4ge1xuICAgIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgLy8gaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcbiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgICAgICAgICAgICAgLnJlZ2lzdGVyKFwiL3NlcnZpY2Utd29ya2VyLmpzXCIpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlcnZpY2UgV29ya2VyIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB0ZWFtKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIFNlcnZpY2UgV29ya2VyXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgLy8gICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgICAgIC8vICAgICAgICAgLnJlZ2lzdGVyKFwiL2Rpc3Qvc2VydmljZS13b3JrZXIuanNcIilcbiAgICAgICAgLy8gICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRElTVCBTZXJ2aWNlIFdvcmtlciBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZFwiKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGVhbSgpXG4gICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byByZWdpc3RlciBESVNUIFNlcnZpY2UgV29ya2VyXCIpO1xuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlIFdvcmtlciBpc24ndCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLlwiKTtcbiAgICB9XG59KSgpKSAiXSwic291cmNlUm9vdCI6IiJ9